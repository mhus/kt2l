"use strict";(self.webpackChunkKT2L=self.webpackChunkKT2L||[]).push([[7153],{4058:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>l,frontMatter:()=>r,metadata:()=>s,toc:()=>d});var o=t(5893),i=t(1151);const r={sidebar_position:14,title:"Using Configurations"},c="Using Configurations",s={id:"contribute/configuration",title:"Using Configurations",description:"Configurations are services in KT2L. To use a configuration",source:"@site/docs/contribute/configuration.md",sourceDirName:"contribute",slug:"/contribute/configuration",permalink:"/docs/contribute/configuration",draft:!1,unlisted:!1,editUrl:"https://github.com/mhus/kt2l/blob/main/docs/docs/contribute/configuration.md",tags:[],version:"current",sidebarPosition:14,frontMatter:{sidebar_position:14,title:"Using Configurations"},sidebar:"tutorialSidebar",previous:{title:"Resource Actions",permalink:"/docs/contribute/resource-action"},next:{title:"Screenshots",permalink:"/docs/screenshots"}},a={},d=[{value:"Create a custom Configuration services",id:"create-a-custom-configuration-services",level:2},{value:"Config vs. Cfg",id:"config-vs-cfg",level:2},{value:"Create a Cfg panel",id:"create-a-cfg-panel",level:2}];function u(e){const n={code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{id:"using-configurations",children:"Using Configurations"}),"\n",(0,o.jsxs)(n.p,{children:["Configurations are services in KT2L. To use a configuration\nsimply Autowire the ",(0,o.jsx)(n.code,{children:"ConfigurationService"})," and call the ",(0,o.jsx)(n.code,{children:"get"})," methods."]}),"\n",(0,o.jsx)(n.p,{children:"There are two types of configurations. A single static configuration and user related configurations.\nThe user configurations are looked up also in the user directories. If the configuration is not protected\nthe user can overwrite the configuration in its own home directory."}),"\n",(0,o.jsxs)(n.p,{children:["Static configurations are stored in the ",(0,o.jsx)(n.code,{children:"config"})," directory of the KT2L installation."]}),"\n",(0,o.jsxs)(n.p,{children:["The user is read from the vaadin UI variable. In some cases this is not available. In this case you need\nto remember the SecurityContext calling the static method ",(0,o.jsx)(n.code,{children:"SecurityContext.context()"})," and\nencapsulate the code with a try use block."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-java",children:"final var cc = SecurityContext.create();\nThread.startVirtualThread(() -> {\n    try (var cce = cc.enter()) {\n        // your code here ...\n    }\n});\n"})}),"\n",(0,o.jsx)(n.h2,{id:"create-a-custom-configuration-services",children:"Create a custom Configuration services"}),"\n",(0,o.jsxs)(n.p,{children:["To create a custom configuration service you need to extend the ",(0,o.jsx)(n.code,{children:"AbstractUserRelatedConfig"})," or ",(0,o.jsx)(n.code,{children:"AbstractSingleConfig"})," base class. Call the\nconstructor with the basename of the configuration file and use ",(0,o.jsx)(n.code,{children:"config()"})," to get the base node of the configuration each time you access a\nconfiguration parameter. The ",(0,o.jsx)(n.code,{children:"config()"})," method is getting the configuration from current the user each time you call it. The method has caching\nimplemented you can call it as often as you like."]}),"\n",(0,o.jsx)(n.h2,{id:"config-vs-cfg",children:"Config vs. Cfg"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"config"})," provides configuration for the application and ",(0,o.jsx)(n.code,{children:"cfg"})," is used to provide editors to store user configurations."]}),"\n",(0,o.jsx)(n.h2,{id:"create-a-cfg-panel",children:"Create a Cfg panel"}),"\n",(0,o.jsxs)(n.p,{children:["To provide UI for a configuration you need to create a ",(0,o.jsx)(n.code,{children:"Cfg"})," factory as Bean. The factory is used to create the editor\nfor the configuration. Implement ",(0,o.jsx)(n.code,{children:"CfgFactory"})," in your new factory class and annotate with ",(0,o.jsx)(n.code,{children:"@Component"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["To provide a form in the ",(0,o.jsx)(n.code,{children:"CfgPanel"})," extend The ",(0,o.jsx)(n.code,{children:"CPanelVerticalLayout"})," and use the ",(0,o.jsx)(n.code,{children:"YComponent"})," classes to\ncreate the form."]}),"\n",(0,o.jsxs)(n.p,{children:["A good example is ",(0,o.jsx)(n.code,{children:"ClusterCfgPanel"}),"."]})]})}function l(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>s,a:()=>c});var o=t(7294);const i={},r=o.createContext(i);function c(e){const n=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);